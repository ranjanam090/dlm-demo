
:root{
  --bg:#0b0f14;
  --panel:#121a22;
  --card:#0f161e;
  --text:#e8f0f7;
  --muted:#9fb2c3;
  --accent:#00c2b8; /* swap for brand primary */
  --accent-2:#7af0d8; /* optional gradient accent */
  --good:#7ee787;
  --warn:#ffb454;
  --danger:#ff6b6b;
  --token:#19d3c5; /* module color */
  --token-shadow: rgba(26, 211, 197, .35);
  --border:rgba(255,255,255,.06);
  --grid: rgba(255,255,255,.08);
  --radius:14px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0; background:linear-gradient(180deg, #0b0f14, #0a1118 60%, #0b0f14);
  color:var(--text); font:500 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
}

.container{ max-width:1120px; margin:0 auto; padding:24px; }

.hero{ text-align:center; padding-top:28px; padding-bottom:6px; }
h1{ margin:0 0 10px; font-size: clamp(24px, 4vw, 44px); letter-spacing: .2px; }
h1 .accent{ color:var(--accent); }
.sub{ color:var(--muted); margin:0 auto 18px; max-width:780px; }

.controls{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; align-items:center; }
.btn{
  background:var(--accent); color:#052524; border:none; padding:10px 14px; border-radius:10px; font-weight:700;
  cursor:pointer; box-shadow:0 4px 18px rgba(0,0,0,.25);
}
.btn:hover{ filter:brightness(1.05); }
.btn[aria-disabled="true"]{ opacity:.5; pointer-events:none; }
.btn-outline{ background:transparent; color:var(--text); border:1px solid var(--border); }

.toggle{ display:inline-flex; align-items:center; gap:8px; color:var(--muted); }
.toggle input{ width:18px; height:18px; }

.stage{
  position:relative; display:grid; grid-template-columns: 280px 1fr; gap:18px;
  background:var(--panel); border:1px solid var(--border); border-radius:var(--radius);
  padding:18px; min-height:440px;
}
.pool{ background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px; }
.pool-title{ display:flex; justify-content:space-between; align-items:baseline; margin:0 0 8px; font-size:18px; }
#poolKw{ color:var(--muted); font-weight:500; }

.module-stack{
  display:grid; grid-template-columns: repeat(2, 1fr); gap:8px; min-height:240px; padding:8px;
  background:linear-gradient(180deg, rgba(255,255,255,.03), transparent); border-radius:10px; border:1px dashed var(--grid);
}
.module-chip{ width:16px; height:16px; background:var(--token); display:inline-block; border-radius:4px; box-shadow:0 0 0 2px rgba(255,255,255,.06), 0 4px 14px var(--token-shadow); }

.legend{ display:flex; align-items:center; gap:8px; color:var(--muted); margin-top:10px; }

.stalls{ display:grid; grid-template-columns: repeat(3, minmax(220px, 1fr)); gap:14px; align-content:start; }
.stall{ background:var(--card); border:1px solid var(--border); border-radius:12px; padding:12px; position:relative; }
.stall h3{ margin:0 0 6px; font-size:16px; display:flex; justify-content:space-between; align-items:center; }
.stall .tag{ color:var(--muted); font-weight:600; font-size:12px; border:1px solid var(--border); padding:2px 8px; border-radius:999px; }

.meter{ height:12px; background:rgba(255,255,255,.06); border-radius:8px; overflow:hidden; }
.bar{ height:100%; width:0; background:linear-gradient(90deg, var(--accent), var(--accent-2)); transition:width .45s cubic-bezier(.2,.8,.2,1); }

.meta{ display:flex; justify-content:space-between; gap:10px; color:var(--muted); font-size:13px; margin-top:8px; }

.priority{
  display:flex; align-items:center; gap:6px; color:var(--muted); margin-top:8px;
}
.priority input[type="range"]{
  width:100%; accent-color: var(--accent);
}

.controls-row{
  display:flex; gap:8px; margin-top:10px;
}
.controls-row .btn{ padding:8px 10px; font-weight:600; }

.tokens-layer{ position:absolute; inset:0; pointer-events:none; overflow:visible; }
.token{
  position:absolute; width:16px; height:16px; border-radius:4px; background:var(--token);
  box-shadow:0 0 0 2px rgba(255,255,255,.06), 0 10px 24px var(--token-shadow);
  transform:translate(-50%,-50%);
}
.token.fade{ transition:opacity .2s ease; opacity:0; }

.summary{ margin-top:18px; }
.grid{ width:100%; border-collapse:separate; border-spacing:0; }
.grid th, .grid td{ text-align:left; border-bottom:1px solid var(--border); padding:10px 8px; }
.grid thead th{ color:var(--muted); font-weight:600; }
.grid tbody td:nth-child(3){ font-weight:700; }
.help{ color:var(--muted); }

.foot{ color:var(--muted); text-align:center; border-top:1px solid var(--border); margin-top:30px; padding-top:16px; }

/* Accessibility: reduce motion */
@media (prefers-reduced-motion: reduce){
  *{ animation-duration: 0s !important; transition-duration: 0s !important; }
}
